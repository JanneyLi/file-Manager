<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>文件上传</title>
    <link rel="stylesheet" href="/element-ui/lib/theme-chalk/index.css">
    <script src="/vue/dist/vue.js"></script>
    <script src="/axios/dist/axios.js"></script>
    <script src="/element-ui/lib/index.js"></script>
</head>
<body>


<el-container id="app">
    <el-header style="text-align: center">文件上传路径：</el-header>
    <el-main>
        <el-upload
                class="upload-demo"
                action="/upload"
                :on-preview="handlePreview"
                :on-remove="handleRemove"
                :before-remove="beforeRemove"
                multiple
                :file-list="fileList"
                :on-success="onSuccess"
        >
            <el-button size="small" type="primary">点击上传</el-button>

        </el-upload>
    </el-main>

</el-container>



<script>
    const app = new Vue({
        el: "#app",
        inputPath: "",
        parentPath:"",
        data: {
            fileList: []
        },
        created() {

        },
        methods: {



            handleRemove(file, fileList) {
                console.log(file, fileList);
                axios.delete(`/file?parentPath=${this.parentPath}&childPath=${file.name}`).then(
                    reponse=>{
                        this.$message({
                            showClose: true,
                            message: `删除${file.name}成功`,
                            type: 'success'
                        });

                    }
                ).catch();
            },
            handlePreview(file) {
                console.log(file);
            },

            beforeRemove(file, fileList) {
                return this.$confirm(`确定移除 ${file.name}？`);
            },
            onSuccess(response, file, fileList) {
                this.$message({
                    showClose: true,
                    message: `上传${file.name}成功`,
                    type: 'success'
                });

            }
        }

    });

</script>

</body>
</html>